---
classes:
  - common::baseapps
  - debian::apt::sources
  - exim4
  #- icecast2
  - airtime

airtime:
  # The port of the Web interface.
  # Default is 8080.
  port: 8080



# /!\ Depends on repositories::webradio. /!\
icecast2:

  # Location and adim are visible on the server info page
  # of the icecast web interface.
  # For location, the default value is "$datacenter" if defined
  # else it's "$fqdn".
  # For official_admin_mail, the default is "$admin_email" if defined
  # else it's "admin@$fqdn".
  location: 'Lesseps'
  official_admin_mail: 'admin@crdp.ac-versailles.fr'

  # It's the ssh url of the git repository of the mountpoints.
  # The default value is an empty, ie icecast2 doesn't use
  # a git repository.
  git_repository: git@gitlab.crdp.ac-versailles.fr:francois.lafont/web-radio.git

  # Address mails to notify when the Icecast2 configuration is
  # updated and/or when Icecast2 doesn't restart after the
  # update. It must be an array. Default value is an empty
  # array (ie no notification).
  admins_mails:
    - 'mathsattacks@free.fr'
    - 'francois.lafont@crdp.ac-versailles.fr'

  # The password of the default username (called 'source') for all
  # source connections. It can be changed in the individual mount
  # sections.
  # The password of the 'relay' username is automatically set to
  # the same value.
  # Default is '__pwd__{"salt" => ["$fqdn", "source"], "nice" => true, "max_length" => 10 }'.
  source_password: '__pwd__{"salt" => ["$fqdn", "source"], "nice" => true, "max_length" => 8 }'

  # Admin password in the web administration interface.
  # Default is '__pwd__{"salt" => ["$fqdn", "admin"], "nice" => true, "max_length" => 10 }'.
  admin_password: '__pwd__{"salt" => ["$fqdn", "admin"], "nice" => true, "max_length" => 8 }'

  # Default is 8000.
  port: '80'

  # Max connections for the entire server (not per mountpoint).
  # Default is 100.
  limits_clients: 200

  # Max number of connected sources supported by the server.
  # Default is 10.
  limits_sources: 20

  # If source does not send any data within this timeout period (in
  # seconds), then the source connection is removed from the server.
  # The default is 10.
  limits_source_timeout: 20

  # 4=Debug, 3=Info, 2=Warn, 1=Error.
  # With log level equal to 3 and if there is Airtime installed too
  # with a stream set with a bad password, there will be regular
  # writing on the log file.
  # But 3 is the recommended value. For example, with log_level 2,
  # Icecast2 don't log in /var/icecast2/error.log the begin of the
  # source connection and the end.
  # Default is 3 (ie info + warn + error).
  log_level: 3

  # Log size in KBytes. If a log file is grower than the log size,
  # then "mv <filename>.log <filename>.log.old".
  # Default is 10000.
  log_size: 10000


